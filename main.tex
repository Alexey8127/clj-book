
\documentclass[10pt,draft]{book} % ,draft

\usepackage{tikz}
\usepackage{tocloft}
\usepackage{spverbatim}
\usepackage{geometry}
\usepackage[utf8]{inputenc}
\usepackage[english,russian]{babel}
\usepackage[
  activate={true, nocompatibility},
  final,
  tracking=true,
  kerning=true,
  spacing=true,
  factor=1100,
  stretch=10,
  shrink=10
]{microtype}

% to have bold tt fonts in code listings
\usepackage{bold-extra}

\usepackage[newfloat=true]{minted}
\usemintedstyle{print}

\SetupFloatingEnvironment{listing}{placement=H}

% to have ' and ` in verbatim
\usepackage{textcomp}
\usepackage{upquote}

% to replace strings
\usepackage{xstring}

% extra space at the end of macros
\usepackage{xspace}


% index
\usepackage{index}
\newindex{default}{idx}{ind}{Предметный указатель}
\usepackage[
  unbalanced,
  itemlayout=abshang,
  indentunit=0.25em,
  totoc
]{idxlayout}

\geometry{
  papersize={145mm,210mm}, % 140x200 + 5mm bleed
  left   = 20mm,           % 20mm + 0mm bleed
  right  = 20mm,           % 15mm + 5mm bleed
  top    = 20mm,           % 15mm + 5mm bleed
  bottom = 25mm            % 20mm + 5mm bleed
}

%% debug frames
%% \geometry{showframe}

\setlength{\parskip}{0.32em}

\pagestyle{plain}

\setcounter{tocdepth}{1}

\widowpenalty 10000
\clubpenalty 10000

\input{charts}
\input{macro}

\author{Иван Гришаев}
\title{Clojure на работе}
\date{}

%% \makeindex

\begin{document}

\input{hyphenation}

\maketitle

\input{abstract}

\frontmatter
\tableofcontents
\include{about}

\mainmatter
%% \include{ch1-web}
%% \include{ch2-spec}
%% \include{ch3-exceptions}
%% \include{ch4-mutability}
%% \include{ch5-config}
%% \include{ch6-systems}
%% \include{ch7-tests}

\backmatter
\include{afterword}

\printindex

\end{document}
