
\def\Plus{\texttt{+}}
\def\Minus{\texttt{-}}

\def\linegap{\vspace{1.25em}}

\def\arr{$\to$\xspace}

\newcommand{\mnoindent}{\ifx\DEVICETYPE\MOBILE\noindent\fi}

\newcommand{\slurp}{\vspace{-1em}}

\newcommand{\coderef}[1]{(line~#1)\xspace}

\newenvironment{teaser}{\vspace{-3em}\slshape}{\vspace{1em}}

\newcommand{\eng}[1]{(eng.~#1)}

\ifx\MODE\PRINT
\newcommand{\page}[1]{(p.~\pageref{#1})}
\newcommand{\fig}[1]{(fig.~\ref{#1})}
\newcommand{\lis}[1]{(listing~\ref{#1})}
\fi

\ifx\MODE\EBOOK
\newcommand{\page}[1]{\hyperref[#1]{\uline{(p.~\pageref{#1})}}}
\newcommand{\fig}[1]{\hyperref[#1]{\uline{(fig.~\ref{#1})}}}
\newcommand{\lis}[1]{\hyperref[#1]{\uline{(listing~\ref{#1})}}}
\fi

\ifx\DEVICETYPE\MOBILE
\newcommand{\chart}[1]{\begin{center}\input{#1}\end{center}}
\else
\newcommand{\chart}[1]{\input{#1}}
\fi

\def\wavetop{{\noindent\centering\raisebox{-0em}[0em][0em]{\uwave{\hspace{3cm}}}\par}}

\def\wavebottom{{\noindent\centering\raisebox{0.9em}[0em][0em]{\uwave{\hspace{3cm}}}\par}}

\def\splitter{{\noindent\centering\rule{3cm}{.4pt}\par}}

\def\blank{\clearpage{\pagestyle{empty}\cleardoublepage}}

\ifx\MODE\PRINT
\NewDocumentCommand{\footurl}{ m m O{} O{1mm} }{%
  #1\footnote{\StrSubstitute{#2}{https://}{}}%
  \ifx\QR\NIL\else\marginnote{\setstretch{0.5}\qrcode[height=10mm]{#2}\\\vspace{1mm}{\tiny #3}}[#4]\fi}%
\fi

\ifx\MODE\EBOOK
\NewDocumentCommand{\footurl}{ m m O{} O{} }{\href{#2}{\uline{#1}}}
\fi

\newcommand{\smartlink}[2]{%
\ifx\MODE\PRINT
\texttt{#1}%
\fi
\ifx\MODE\EBOOK
\href{#2}{\uline{#1}}%
\fi
}


%% todo: add xspace
\def\EMAILLINK{\smartlink{\EMAIL}{mailto:\EMAIL}}

\def\SITELINK{\smartlink{\DOMAIN}{https://\DOMAIN}}

%% small non-breaking space
%% https://tex.stackexchange.com/questions/76132/
\newcommand{\tuple}[1]{\textlangle\,#1\,\textrangle}

\newminted[clojure]{clojure}{}

\ifx\MODE\PRINT
\def\codeindent{0mm}
\fi

\ifx\MODE\EBOOK
\def\codeindent{\parindent}
\fi

\newminted[clojure/lines]{clojure}{linenos, xleftmargin=\codeindent}

\newminted[python/lines]{python}{linenos, xleftmargin=\codeindent}

\newminted[json/lines]{json}{linenos, xleftmargin=\codeindent}

\newminted[json]{json}{}

\newminted[yaml]{yaml}{}

\newminted[bash]{console}{}

\newminted[python]{python}{}

\newminted[htmldjango]{htmldjango}{}

\newminted[js]{js}{}

\newminted[xml]{xml}{}

\newminted[diff]{diff}{}

\newminted[sql]{sql}{}

\newminted[http]{http}{}

\newminted[text]{text}{}

\newminted[ini]{ini}{}
